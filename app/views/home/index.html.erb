<div class="col-md-12 home-content">
		<div class="center">
			<div class="home-container">
				<% if user_signed_in? %>
					<div class="row house">
						<h2> Upcoming Appointments<span style="font-size: 14px" ><%= link_to "View Your Calendar", consultation_index_path, class: 'btn btn-default' %></span></h2>
						<% if @upcoming_appointments == [] %>
						<p>You have no upcoming appointments. <a href="/consultation/type" class="btn btn-default">Book a consultation
						today</a></p>
					<% else %>
						<div class="row">
							<% @upcoming_appointments.each do |appointment| %>
								<div class="app-well col-md-5">
									<div class="app-heading">
										<h3><%= appointment.tool %></h3>
									</div>
									<div class="app-body">
										<p><b>Doctor:</b> <%= get_doctor_name appointment.professional %></p>
										<p><b>Date: </b><%= appointment.date_and_time.to_date.to_formatted_s(:long) %></p>
										<p><b>Time: </b><%= appointment.date_and_time.strftime("%I:%M %p") %></p>
								    <p><b>Reason for Consultation: </b><%= appointment.user_notes %></p>

										<p class="consultation-delete"><%= link_to "cancel appointment", consultation_path(appointment), method: :delete, data: { confirm: "Are you sure you want to delete this consultation?" }, :class => "consultation-delete-link btn btn-danger" %></p>
									</div>
								</div>
							<% end %>
						</div>
					<% end %>

					<h2> Appointment Requests </h2>


					<% if @appointment_requests == [] %>
						<p>You have no appointment requests.</p>
					<% else %>
						<div class="row">
							<% @appointment_requests.each do |appointment| %>
								<div class="app-well col-md-5">
									<div class="app-heading">
										<h3><%= appointment.tool %></h3>
									</div>
									<div class="app-body">
										<p><b>Doctor:</b> <%= get_doctor_name appointment.professional %></p>
										<p><b>Date: </b><%= appointment.date_and_time.to_date.to_formatted_s(:long) %> | <b>Time: </b><%= appointment.date_and_time.strftime("%I:%M %p") %></p>
										<p><b>Reason for Consultation: </b><%= appointment.user_notes %></p>

										<p class="consultation-delete"><%= link_to "Cancel Request", consultation_path(appointment), method: :delete, data: { confirm: "Are you sure you want to cancel this consultation request?" }, :class => "consultation-delete-link btn btn-danger" %></p>
									</div>
								</div>
							<% end %>
						</div>
					<% end %>


					<h2>Past Appointments</h2>

					<% if @past_appointments == [] %>
						<p>You have no past appointments. <a href="/consultation/type">Book your first consultation on Doctoora today</a></p>
					<% else %>
						<div class="row">
							<% @past_appointments.each do |appointment| %>
								<div class="app-well col-md-5">
									<div class="app-heading">
										<h3><%= appointment.tool %></h3>
									</div>
									<div class="app-body">
										<p><b>Doctor:</b> <%= get_doctor_name appointment.professional %></p>
										<p><b>Date: </b><%= appointment.date_and_time.to_date.to_formatted_s(:long) %></p>
										<p><b>Time: </b><%= appointment.date_and_time.strftime("%I:%M %p") %></p>
									</div>
								</div>
							<% end %>
						</div>
					<% end %>
				</div>

			<div class="row">
				<h2>Trending Topics</h2>
				<div class="row">
					<h4 style="margin-left: 2em">View by Category: </h4>
					<% @card_categories.each do |category| %>
						<div class="col-md-3">
							<%= link_to category.name, show_card_category_path(category) %>
						</div>

					<% end %>
				</div>
				<% @cards.each do |card| %>
					<div class="panel panel-body col-md-4">
						<a href=<%= card.link %>>
							<% if card.video_url %>
								<iframe src="<%= card.video_url %>" frameborder="0"></iframe>
							<% else %>
								<img src=<%= card.image %> class="card-image" />
							<% end %>
							<h3><%= card.title %></a></h3>
						</a>
						<p><%= card.body %></p>
					</div>
				<% end %>
			</div>

		<% elsif doctor_signed_in? %>
			<% if !current_doctor.verified %>
				<div>
					<p>Your application is being verified and you will be notified soon.</p>

					<p><%= link_to "view profile", doctor_profile_path(current_doctor) %></p>
					<p><%= link_to "edit certificates", doctor_onboarding_new_upload_documents_path %></p>
				</div>
			<% else %>

				<div class="pending-requests">
					<% if !@appointment_requests.empty? %>
						<h4 class="pending-header">Appointment Requests</h4>
							<% @appointment_requests.each do |request| %>
							<div class="req-container">
								<div class="date-time">
									<p><b><%= request.date_and_time.to_date.to_formatted_s(:long) %></b></p>
									<p><b><%= request.date_and_time.strftime("%I:%M %p") %></b></p>
								</div>
								<div class="info">
									<p><b><%= get_patient_name request.user_id %></b> (<span><%= request.tool %></span>)</p>
									<p><%= request.user_notes %></p>
									<p class="approval"><span><%=link_to "Approve", accept_consultation_path(request.id), method: :post,class:'approve' %></span> | <span><%= link_to "Reject", reject_consultation_path(request.id), method: :post, class: 'reject' %></span></p>
								</div>
							</div>
							<% end %>
					<% end %>
				</div>

				<div class="today-app">
					<h4 class="today-header">Today's Appointments</h4>
					<% if @upcoming_appointments == [] %>
						<p>You have no appointments scheduled for today.</p>
						 <a class="btn btn-default" href="/doctor_consultation">View your calendar.</a>
					<% else %>
						<div class="row">
							<% @upcoming_appointments.each do |appointment| %>
								<div class="app-container">
									<div class="date-time">
										<p><b><%= request.date_and_time.to_date.to_formatted_s(:long) %></b></p>
										<p><b><%= request.date_and_time.strftime("%I:%M %p") %></b></p>
									</div>
									<div class="info">
										<p><b><%= get_patient_name request.user_id %></b> (<span><%= request.tool %></span>)</p>
										<p><%= request.user_notes %></p>
										<p class="consultation-delete"><%= link_to "Cancel Appointment", consultation_path(appointment), method: :delete, data: { confirm: "Are you sure you want to delete this consultation?" }, :class => "consultation-delete-link reject" %></p>
									</div>
									</div>
								</div>
							<% end %>
					<% end %>
				</div>


			<div class="wallet">
				<h4 class="wallet-header">Wallet</h4>
				<p>Available:</p>
					<h1 id="doc_wallet_balance">â‚¦<%= number_with_delimiter(@wallet_balance, :delimiter => ',') %></h1>
					<h4 class="wallet-btn"><%= link_to "Top Up Wallet", top_up_path(@doctor),class: 'btn btn-info' %></h4>
			</div>


			<div class="past-app">
				<% if !@past_appointments.empty? %>
				<h4 class="past-header"> Past Appointments</h4>
						<% @past_appointments.each do |appointment | %>
							<div class="past-container">
								<div class="date-time">
									<p><b><%= appointment.date_and_time.to_date.to_formatted_s(:long) %></b></p>
									<p><b><%= appointment.date_and_time.strftime("%I:%M %p") %></b></p>
								</div>
								<div class="info">
									<p><b><%= get_patient_name appointment.user_id %></b> (<span><%= appointment.tool %></span>)</p>
									<% if !appointment.patient_reviews.empty? %>
										<p class="consultation-review "><%= link_to "view consultation review", patient_review_path(appointment.patient_reviews.first.id),class: 'approve' %></p>
									<% else %>
										<p class="consultation-review "><%= link_to "Review This Consultation", new_user_patient_review_path(appointment.user_id, appointment.id),class: 'approve' %></p>
									<% end %>
								</div>
							</div>
						<% end %>
				<% end %>
			<% end %>
		</div>
	</div>
			<div class="row">
				<h2> Trending Topics </h2>
				<div class="row">
				<h4 style="margin-left: 1em">View by Category: </h4>
				<% @card_categories.each do |category| %>
					<div class="col-md-3">
						<%= link_to category.name, show_card_category_path(category) %>
					</div>
				<% end %>
				</div>
				<% @cards.each do |card| %>
					<div class="panel panel-body col-md-4">
						<a href=<%= card.link %>>
							<% if card.video_url %>
								<iframe src="<%= card.video_url %>" frameborder="0"></iframe>
							<% else %>
								<img src=<%= card.image %> class="card-image" />
							<% end %>
							<h3><%= card.title %></a></h3>
						</a>
						<p><%= card.body %></p>
					</div>
				<% end %>
			</div>

		<% elsif admin_signed_in? %>
			<div>
				<h2>Welcome, Admin</h2>

				<h4><%= link_to "Notifications (#{@admin_notifications_count})", admin_notifications_path %></h4>
				<br>
				<p><%= link_to "Verify Health Professionals", verify_doctors_path %></p>
				<p><%= link_to "Products", admin_plans_path %></p>
				<p><%= link_to "Product Categories", admin_product_categories_path %></p>

				<p><%= link_to "View Patients", admin_patients_view_path %></p>
				<p><%= link_to "View Health Professionals", admin_doctors_view_path %></p>

				<p><%= link_to "Clinics", clinics_path %></p>
				<p><%= link_to "Cards", cards_path %></p>
				<p><%= link_to "Card Categories", admin_card_categories_path %></p>

				<p><%= link_to "Insurance Providers", admin_insurance_providers_path %></p>
				<p><%= link_to "Pending Insurance Payments", admin_insurance_path %></p>

				<p><%= link_to "Clinic Rentals", admin_clinic_rentals_path %></p>

				<p><%= link_to "Admin Sign Out", destroy_admin_session_path, method: :delete %></p>
			</div>
		<% else %>
			<div class="col-md-4 col-md-offset-2">
				<div>
					<a href="/"><img src="/logo.png" id="home-logo"/></a>
				</div>
				<%= link_to "Log in as a patient", new_user_session_path, :class => "access-link" %><br />
				<%= link_to "Log in as a professional", new_doctor_session_path, :class => "access-link" %><br />
				<%= link_to "Sign up as a patient", new_user_registration_path, :class => "access-link" %><br />
				<%= link_to "Sign up as a professional", new_doctor_registration_path, :class => "access-link" %><br />
				<br />
				<br />
		    	<%= link_to "Forgot your password?", new_user_password_path %>
			</div>
		<% end %>
	</div>
</div>
